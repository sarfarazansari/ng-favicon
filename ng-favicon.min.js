angular.module("favicon",[]).directive("favicon",function(){function e(e,r,n){function t(e){var r="https://www.google.com/s2/favicons?domain=%s";return r.replace(/%s/g,e)}function a(){if(c(e.url)){var r=o(e.url);e.faviconUrl=t(r)}else{var r=i(e.url);e.faviconUrl=t(r)}}function c(e){e=e.replace(new RegExp(/^\s+/),""),e=e.replace(new RegExp(/\s+$/),""),e=e.replace(new RegExp(/\\/g),"/"),e=e.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),""),e=e.replace(new RegExp(/^www\./i),""),e=e.replace(new RegExp(/\/(.*)/),""),e.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?e=e.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):e.match(new RegExp(/\.[a-z]{2,4}$/i))&&(e=e.replace(new RegExp(/\.[a-z]{2,4}$/i),""));var r=e.match(new RegExp(/\./g))?!0:!1;return r}function o(e){var r=new URL(e);if(-1!==r.host.indexOf(".")){var n=r.host.split(".");return r.protocol+"//"+n[1]+"."+n[2]}return r.protocol+"//"+r.host}function i(e){var r=new URL(e);return r.protocol+"//"+r.host}a()}var r={restrict:"E",replace:!0,template:'<img ng-src="{{faviconUrl}}" alt="{{description}}">',scope:{url:"=",description:"="},link:e};return r});