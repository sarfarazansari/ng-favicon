angular.module("ng-favicon",[]).directive("favicon",function(){function b(a,b,c){function d(a){var b="https://www.google.com/s2/favicons?domain=%s";return b.replace(/%s/g,a)}function e(){if(f(a.url)){var b=g(a.url);a.faviconUrl=d(b)}else a.faviconUrl=d(a.url)}function f(a){a=a.replace(new RegExp(/^\s+/),""),a=a.replace(new RegExp(/\s+$/),""),a=a.replace(new RegExp(/\\/g),"/"),a=a.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),""),a=a.replace(new RegExp(/^www\./i),""),a=a.replace(new RegExp(/\/(.*)/),""),a.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?a=a.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):a.match(new RegExp(/\.[a-z]{2,4}$/i))&&(a=a.replace(new RegExp(/\.[a-z]{2,4}$/i),""));var b=!!a.match(new RegExp(/\./g));return b}function g(a){var b=new URL(a);if(b.host.indexOf(".")!==-1){var c=b.host.split(".");return b.protocol+"//"+c[1]+"."+c[2]}return b.protocol+"//"+b.host}e()}var a={restrict:"E",replace:!0,template:'<img ng-src="{{faviconUrl}}" alt="{{description}}">',scope:{url:"=",description:"="},link:b};return a});